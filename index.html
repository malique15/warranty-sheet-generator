<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Warranty Sheet Generator</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="container">
    <h1>Warranty Sheet</h1>


    <!-- <h2>Register (Test Only)</h2>
    <form id="registerForm">
      <input type="text" id="registerUsername" placeholder="Username" required>
      <input type="password" id="registerPassword" placeholder="Password" required>
      <input type="text" id="registerLocation" placeholder="Location" required>
      <button type="button" onclick="handleRegister()">Register</button>
    </form> -->


    <!-- Login Section -->
    <div id="loginContainer">
      <h2>Login</h2>
      <div class="login-form-group">
        <label for="username">Username</label>
        <input type="text" id="username" placeholder="Enter username" required>
      </div>
      <div class="login-form-group">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter password" required>
      </div>
      <button class="login-btn" onclick="handleLogin()">Login</button>
      <div id="loginStatus"></div>
    </div>




    <!-- Warranty Section: Hidden by default until login -->
    <div id="warrantySection" style="display: none;">



      <!-- Warranty Search Section -->
      <div id="searchSection" style="margin-top: 20px;">
        <label for="searchDate">Search by Date:</label>
        <input type="date" id="searchDate" />
        <button onclick="searchWarrantiesByDate()">Search</button>
      </div>

      <!-- Search Results Table (Initially Hidden) -->
      <div id="searchResults" style="display: none; margin-top: 20px;">
        <h3>Search Results</h3>
        <table id="warrantyTable" border="1" cellpadding="8">
          <thead>
            <tr>
              <th>Customer</th>
              <th>Date</th>
              <th>Machines</th>
              <th>Reprint</th>
            </tr>
          </thead>
          <tbody></tbody> <!-- 👈 REQUIRED or JavaScript will crash -->
        </table>
      </div>




      <div class="warrantyForm">
        <!-- Customer Name entered only once -->
        <form id="warrantyForm">
          <div class="custLabel">
            <label for="custName">Name:</label>
            <input class="custName" type="text" id="custName" required>
          </div>

          <!-- Machine rows container -->
          <div id="machineForms">
            <div id="warranty-form-row" class="warranty-form-row">

              <div class="row-1">

                <div class="brandCont">
                  <label for="brand">Brand:</label>
                  <div class="customSelect">
                    <select class="brand">
                      <option value="" selected disabled>Select Brand</option>
                      <option value="Fixtec">Fixtec</option>
                      <option value="Stihl">Stihl</option>
                      <option value="DeWalt">DeWalt</option>
                      <option value="Rigid">Rigid</option>
                      <option value="Echo">Echo</option>
                    </select>
                  </div>
                </div>

                <div class="warrantyCont">
                  <label for="warrantyPeriod">Warranty:</label>
                  <div class="customSelect">
                    <select class="warrantyPeriod">
                      <option value="" selected disabled>Select Period</option>
                      <option value="3 Months">3 Months</option>
                      <option value="7 Months">7 Months</option>
                      <option value="1 Year">1 Year</option>
                    </select>
                  </div>
                </div>

                <div class="modelCont">
                  <label for="model">Model:</label>
                  <input type="text" class="model" placeholder="Enter Model" required>
                </div>

                <div class="serialCont">
                  <label for="serialNumber">Serial Num:</label>
                  <input type="text" class="serialNumber" placeholder="Enter Serial Number" required>
                </div>

              </div>

              <label for="armature">Armature:</label>
              <div class="customSelect">
                <select class="armature">
                  <option value="" selected disabled>Select Option</option>
                  <option value="YES">YES</option>
                  <option value="NO">NO</option>
                </select>
              </div>

              <label for="twoCycle">2-Stroke:</label>
              <div class="customSelect">
                <select class="twoCycle" onchange="toggleMachineType(this)">
                  <option value="" selected disabled>Select Option</option>
                  <option value="YES">YES</option>
                  <option value="NO">NO</option>
                </select>
              </div>

              <label style="display: none;" for="machineType">Machine Type:</label>
              <select style="display: none;" class="machineType">
                <option value="" selected disabled>Select Type</option>
                <option value="Brush Cutter">Brush Cutter</option>
                <option value="Chainsaw">Chainsaw</option>
              </select>

              <!-- Remove button -->
              <button type="button" onclick="removeRow(this)">Remove</button>
            </div>
          </div>
        </form>

      </div>
      <!-- Action buttons -->
      <button type="button" onclick="addMachineRow()">+ Add Another Machine</button>
      <button type="button" onclick="generatePrintPreview()">Generate Preview</button>
      <button onclick="saveWarrantyToServer()">Save Warranty</button>
      <button type="button" onclick="resetForm()">New Warranty</button>
      <button type="button" onclick="logoutUser()">Logout</button>
    </div>
  </div>

  <!-- 🔍 Warranty Search Modal -->
  <div id="searchModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeSearchModal()">&times;</span>
      <h2>Search Results</h2>
      <div id="searchResultsContainer"></div>
    </div>
  </div>


  <script src="script.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</body>

</html>